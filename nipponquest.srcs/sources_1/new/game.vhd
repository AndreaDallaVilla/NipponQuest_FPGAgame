----------------------------------------------------------------------------------
-- Company: 
-- Students: 
-- Maya D'Onofrio (M.245665)
-- Andrea Dalla Villa (M.242637)
-- Create Date: 24.01.2025 14:12:35
-- Design Name: 
-- Module Name: game - Behavioral
-- Project Name: 
-- Target Devices: 
-- Tool Versions: 
-- Description: 
-- 
-- Dependencies: 
-- 
-- Revision:
-- Revision 0.01 - File Created
-- Additional Comments:
-- 
----------------------------------------------------------------------------------


library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.STD_LOGIC_ARITH.ALL;
use IEEE.std_logic_unsigned.all;
-- Uncomment the following library declaration if using
-- arithmetic functions with Signed or Unsigned values
--use IEEE.NUMERIC_STD.ALL;

-- Uncomment the following library declaration if instantiating
-- any Xilinx leaf cells in this code.
--library UNISIM;
--use UNISIM.VComponents.all;

entity game is
 Port ( 
 
   clk : in STD_LOGIC;
        --VGA
        vgaRed : out STD_LOGIC_VECTOR(3 downto 0);
        vgaBlue : out STD_LOGIC_VECTOR(3 downto 0);
        vgaGreen : out STD_LOGIC_VECTOR(3 downto 0);
        Hsync : out STD_LOGIC;
        Vsync : out STD_LOGIC; 
        
        --7-segment display
        a, b, c, d, e, f, g, dp : out STD_LOGIC; 
        an : out STD_LOGIC_VECTOR(3 downto 0) ;

        --MIC
        m_clk    : out std_logic;
        m_lr_sel : out std_logic;
        m_data   : in  std_logic; 

        --OTHER
        reset : in STD_LOGIC
 
 );
end game;

architecture Behavioral of game is
    component SevSeg_4digit
        port (
            clk : in STD_LOGIC;
            in0, in1, in2, in3: in STD_LOGIC_VECTOR(3 downto 0);
            a, b, c, d, e, f, g, dp : out STD_LOGIC;
            an : out STD_LOGIC_VECTOR( 3 downto 0)
        );
    end component;

    -- types to create arrays
    type int_array_Y is array (0 to 4) of natural range 0 to 1024; 
	type int_array_X is array (0 to 4) of integer range -1280 to 3280;-- Up to 3280 For overflow issues
	type int_array_L is array (0 to 4) of integer range 0 to 500;
	type int_array_Y_levels is array (0 to 99) of natural range 0 to 1024; 
	type int_array_L_levels is array (0 to 99) of integer range 0 to 300;
    
   
    signal btn_cnt : natural range 0 to 1000000; 
    signal clk_cnt : natural range 0 to 500000; 
    signal frame_count : natural range 0 to 1000000; 

    -- COSTANTI
    constant sizeOfGuy: natural := 50; 
	constant radius: integer := 200; 
	constant heightOfBar: natural := 30; 
	constant centerX: natural := 640; 
	constant centerY: natural := 512; 

    
        -- Signals for the guy
        signal posXUser : natural range 0 to 1280; 
        signal posYUser : natural range 0 to 1024; 
        constant ground_level : INTEGER := 650; 
        signal platform_y : INTEGER := 650;

        -- Signals for the bars
        signal X : natural range 0 to 1280; 
        signal Y : natural range 0 to 1024; 
        signal BarYPositions : int_array_Y; 
        signal BarLengths : int_array_L; 
        signal BarXPositions : int_array_X; 
        signal indexBarNext : natural range 0 to 99; 
        signal cur_cnt: natural range 0 to 1000; 
        
        constant BarYPositionsNext : int_array_Y_levels := (700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700, 700);
        constant BarLengthsNext: int_array_L_levels     := (124, 226, 162, 208, 150, 158, 250, 173, 185, 174, 141, 208, 166, 185, 141, 135, 223, 155, 196, 184, 202, 145, 248, 190, 155, 162, 251, 178, 194, 251, 152, 171, 196, 177, 211, 171, 214, 236, 113, 256, 161, 206, 215, 139, 250, 151, 164, 234, 208, 185, 201, 252, 182, 239, 165, 255, 168, 178, 226, 232, 181, 240, 222, 125, 172, 157, 228, 245, 154, 168, 188, 159, 251, 190, 239, 173, 164, 243, 203, 227, 150, 245, 163, 211, 254, 170, 210, 220, 163, 190, 219, 240, 185, 256, 200, 192, 222, 183, 250, 204);

        -- Motion of guy and bars
        signal moveUp: std_logic; 
        signal move: std_logic; 
        signal speedOfGuy: natural; 
        constant gravity        : INTEGER := 1; 
        constant jump_force : INTEGER := 10; 
        signal speedOfBars: natural; 
        
       
        signal currentUpEdge: natural range 0 to 1024 := 0;
        signal currentEdge: natural range 0 to 1024 := 0;
    
    -- Other Signals 
    signal btnU_DB : std_logic; 
    signal gg: std_logic;
    signal rr: std_logic; 
    signal gameOver: std_logic; 

    --VGA output signals
    signal Red : natural range 0 to 15;
    signal Green : natural range 0 to 15;
    signal Blue : natural range 0 to 15;

    -- Signals for the 7-segment display (score)
    signal in0, in1, in2, in3 : std_logic_vector( 3 downto 0); 
    signal score: natural range 0 to 9999; 
    signal score_cnt: natural range 0 to 10000000; 

    function draw_char(X : natural; Y : natural; char : character) return boolean is 
        constant ADDR_WIDTH: integer:=11;
        constant DATA_WIDTH: integer:=8;
        type rom_type is array (0 to 2**ADDR_WIDTH-1) of std_logic_vector(DATA_WIDTH-1 downto 0);
        -- ROM definition
        constant ROM: rom_type:=(   -- 2^11-by-8
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "00000000", -- 5
           "00000000", -- 6
           "00000000", -- 7
           "00000000", -- 8
           "00000000", -- 9
           "00000000", -- a
           "00000000", -- b
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x01 ?
           "00000000", -- 0
           "00000000", -- 1
           "01111110", -- 2  ******
           "10000001", -- 3 *      *
           "10100101", -- 4 * *  * *
           "10000001", -- 5 *      *
           "10000001", -- 6 *      *
           "10111101", -- 7 * **** *
           "10011001", -- 8 *  **  *
           "10000001", -- 9 *      *
           "10000001", -- a *      *
           "01111110", -- b  ******
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x02 ?
           "00000000", -- 0
           "00000000", -- 1
           "01111110", -- 2  ******
           "11111111", -- 3 ********
           "11011011", -- 4 ** ** **
           "11111111", -- 5 ********
           "11111111", -- 6 ********
           "11000011", -- 7 **    **
           "11100111", -- 8 ***  ***
           "11111111", -- 9 ********
           "11111111", -- a ********
           "01111110", -- b  ******
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x03 ?
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "01101100", -- 4  ** **
           "11111110", -- 5 *******
           "11111110", -- 6 *******
           "11111110", -- 7 *******
           "11111110", -- 8 *******
           "01111100", -- 9  *****
           "00111000", -- a   ***
           "00010000", -- b    *
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x04 ?
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00010000", -- 4    *
           "00111000", -- 5   ***
           "01111100", -- 6  *****
           "11111110", -- 7 *******
           "01111100", -- 8  *****
           "00111000", -- 9   ***
           "00010000", -- a    *
           "00000000", -- b
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x05 ?
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00011000", -- 3    **
           "00111100", -- 4   ****
           "00111100", -- 5   ****
           "11100111", -- 6 ***  ***
           "11100111", -- 7 ***  ***
           "11100111", -- 8 ***  ***
           "00011000", -- 9    **
           "00011000", -- a    **
           "00111100", -- b   ****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x06 ?
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00011000", -- 3    **
           "00111100", -- 4   ****
           "01111110", -- 5  ******
           "11111111", -- 6 ********
           "11111111", -- 7 ********
           "01111110", -- 8  ******
           "00011000", -- 9    **
           "00011000", -- a    **
           "00111100", -- b   ****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x07 ?
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "00000000", -- 5
           "00011000", -- 6    **
           "00111100", -- 7   ****
           "00111100", -- 8   ****
           "00011000", -- 9    **
           "00000000", -- a
           "00000000", -- b
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x08 ?
           "11111111", -- 0 ********
           "11111111", -- 1 ********
           "11111111", -- 2 ********
           "11111111", -- 3 ********
           "11111111", -- 4 ********
           "11111111", -- 5 ********
           "11100111", -- 6 ***  ***
           "11000011", -- 7 **    **
           "11000011", -- 8 **    **
           "11100111", -- 9 ***  ***
           "11111111", -- a ********
           "11111111", -- b ********
           "11111111", -- c ********
           "11111111", -- d ********
           "11111111", -- e ********
           "11111111", -- f ********
           -- code x09 ?
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "00111100", -- 5   ****
           "01100110", -- 6  **  **
           "01000010", -- 7  *    *
           "01000010", -- 8  *    *
           "01100110", -- 9  **  **
           "00111100", -- a   ****
           "00000000", -- b
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x0a ?
           "11111111", -- 0 ********
           "11111111", -- 1 ********
           "11111111", -- 2 ********
           "11111111", -- 3 ********
           "11111111", -- 4 ********
           "11000011", -- 5 **    **
           "10011001", -- 6 *  **  *
           "10111101", -- 7 * **** *
           "10111101", -- 8 * **** *
           "10011001", -- 9 *  **  *
           "11000011", -- a **    **
           "11111111", -- b ********
           "11111111", -- c ********
           "11111111", -- d ********
           "11111111", -- e ********
           "11111111", -- f ********
           -- code x0b ?
           "00000000", -- 0
           "00000000", -- 1
           "00011110", -- 2    ****
           "00001110", -- 3     ***
           "00011010", -- 4    ** *
           "00110010", -- 5   **  *
           "01111000", -- 6  ****
           "11001100", -- 7 **  **
           "11001100", -- 8 **  **
           "11001100", -- 9 **  **
           "11001100", -- a **  **
           "01111000", -- b  ****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x0c ?
           "00000000", -- 0
           "00000000", -- 1
           "00111100", -- 2   ****
           "01100110", -- 3  **  **
           "01100110", -- 4  **  **
           "01100110", -- 5  **  **
           "01100110", -- 6  **  **
           "00111100", -- 7   ****
           "00011000", -- 8    **
           "01111110", -- 9  ******
           "00011000", -- a    **
           "00011000", -- b    **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x0d ?
           "00000000", -- 0
           "00000000", -- 1
           "00111111", -- 2   ******
           "00110011", -- 3   **  **
           "00111111", -- 4   ******
           "00110000", -- 5   **
           "00110000", -- 6   **
           "00110000", -- 7   **
           "00110000", -- 8   **
           "01110000", -- 9  ***
           "11110000", -- a ****
           "11100000", -- b ***
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x0e ?
           "00000000", -- 0
           "00000000", -- 1
           "01111111", -- 2  *******
           "01100011", -- 3  **   **
           "01111111", -- 4  *******
           "01100011", -- 5  **   **
           "01100011", -- 6  **   **
           "01100011", -- 7  **   **
           "01100011", -- 8  **   **
           "01100111", -- 9  **  ***
           "11100111", -- a ***  ***
           "11100110", -- b ***  **
           "11000000", -- c **
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x0f ?
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00011000", -- 3    **
           "00011000", -- 4    **
           "11011011", -- 5 ** ** **
           "00111100", -- 6   ****
           "11100111", -- 7 ***  ***
           "00111100", -- 8   ****
           "11011011", -- 9 ** ** **
           "00011000", -- a    **
           "00011000", -- b    **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x10 ?
           "00000000", -- 0
           "10000000", -- 1 *
           "11000000", -- 2 **
           "11100000", -- 3 ***
           "11110000", -- 4 ****
           "11111000", -- 5 *****
           "11111110", -- 6 *******
           "11111000", -- 7 *****
           "11110000", -- 8 ****
           "11100000", -- 9 ***
           "11000000", -- a **
           "10000000", -- b *
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x11 ?
           "00000000", -- 0
           "00000010", -- 1       *
           "00000110", -- 2      **
           "00001110", -- 3     ***
           "00011110", -- 4    ****
           "00111110", -- 5   *****
           "11111110", -- 6 *******
           "00111110", -- 7   *****
           "00011110", -- 8    ****
           "00001110", -- 9     ***
           "00000110", -- a      **
           "00000010", -- b       *
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x12 ?
           "00000000", -- 0
           "00000000", -- 1
           "00011000", -- 2    **
           "00111100", -- 3   ****
           "01111110", -- 4  ******
           "00011000", -- 5    **
           "00011000", -- 6    **
           "00011000", -- 7    **
           "01111110", -- 8  ******
           "00111100", -- 9   ****
           "00011000", -- a    **
           "00000000", -- b
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x13 ?
           "00000000", -- 0
           "00000000", -- 1
           "01100110", -- 2  **  **
           "01100110", -- 3  **  **
           "01100110", -- 4  **  **
           "01100110", -- 5  **  **
           "01100110", -- 6  **  **
           "01100110", -- 7  **  **
           "01100110", -- 8  **  **
           "00000000", -- 9
           "01100110", -- a  **  **
           "01100110", -- b  **  **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x14 �
           "00000000", -- 0
           "00000000", -- 1
           "01111111", -- 2  *******
           "11011011", -- 3 ** ** **
           "11011011", -- 4 ** ** **
           "11011011", -- 5 ** ** **
           "01111011", -- 6  **** **
           "00011011", -- 7    ** **
           "00011011", -- 8    ** **
           "00011011", -- 9    ** **
           "00011011", -- a    ** **
           "00011011", -- b    ** **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x15 �
           "00000000", -- 0
           "01111100", -- 1  *****
           "11000110", -- 2 **   **
           "01100000", -- 3  **
           "00111000", -- 4   ***
           "01101100", -- 5  ** **
           "11000110", -- 6 **   **
           "11000110", -- 7 **   **
           "01101100", -- 8  ** **
           "00111000", -- 9   ***
           "00001100", -- a     **
           "11000110", -- b **   **
           "01111100", -- c  *****
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x16 ?
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "00000000", -- 5
           "00000000", -- 6
           "00000000", -- 7
           "11111110", -- 8 *******
           "11111110", -- 9 *******
           "11111110", -- a *******
           "11111110", -- b *******
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x17 ?
           "00000000", -- 0
           "00000000", -- 1
           "00011000", -- 2    **
           "00111100", -- 3   ****
           "01111110", -- 4  ******
           "00011000", -- 5    **
           "00011000", -- 6    **
           "00011000", -- 7    **
           "01111110", -- 8  ******
           "00111100", -- 9   ****
           "00011000", -- a    **
           "01111110", -- b  ******
           "00110000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x18 ?
           "00000000", -- 0
           "00000000", -- 1
           "00011000", -- 2    **
           "00111100", -- 3   ****
           "01111110", -- 4  ******
           "00011000", -- 5    **
           "00011000", -- 6    **
           "00011000", -- 7    **
           "00011000", -- 8    **
           "00011000", -- 9    **
           "00011000", -- a    **
           "00011000", -- b    **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x19 ?
           "00000000", -- 0
           "00000000", -- 1
           "00011000", -- 2    **
           "00011000", -- 3    **
           "00011000", -- 4    **
           "00011000", -- 5    **
           "00011000", -- 6    **
           "00011000", -- 7    **
           "00011000", -- 8    **
           "01111110", -- 9  ******
           "00111100", -- a   ****
           "00011000", -- b    **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x1a ?
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "00011000", -- 5    **
           "00001100", -- 6     **
           "11111110", -- 7 *******
           "00001100", -- 8     **
           "00011000", -- 9    **
           "00000000", -- a
           "00000000", -- b
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x1b ?
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "00110000", -- 5   **
           "01100000", -- 6  **
           "11111110", -- 7 *******
           "01100000", -- 8  **
           "00110000", -- 9   **
           "00000000", -- a
           "00000000", -- b
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x1c ?
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "00000000", -- 5
           "11000000", -- 6 **
           "11000000", -- 7 **
           "11000000", -- 8 **
           "11111110", -- 9 *******
           "00000000", -- a
           "00000000", -- b
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x1d ?
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "00100100", -- 5   *  *
           "01100110", -- 6  **  **
           "11111111", -- 7 ********
           "01100110", -- 8  **  **
           "00100100", -- 9   *  *
           "00000000", -- a
           "00000000", -- b
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x1e ?
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00010000", -- 4    *
           "00111000", -- 5   ***
           "00111000", -- 6   ***
           "01111100", -- 7  *****
           "01111100", -- 8  *****
           "11111110", -- 9 *******
           "11111110", -- a *******
           "00000000", -- b
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x1f ?
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "11111110", -- 4 *******
           "11111110", -- 5 *******
           "01111100", -- 6  *****
           "01111100", -- 7  *****
           "00111000", -- 8   ***
           "00111000", -- 9   ***
           "00010000", -- a    *
           "00000000", -- b
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x20 ' '
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "00000000", -- 5
           "00000000", -- 6
           "00000000", -- 7
           "00000000", -- 8
           "00000000", -- 9
           "00000000", -- a
           "00000000", -- b
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x21 !
           "00000000", -- 0
           "00000000", -- 1
           "00011000", -- 2    **
           "00111100", -- 3   ****
           "00111100", -- 4   ****
           "00111100", -- 5   ****
           "00011000", -- 6    **
           "00011000", -- 7    **
           "00011000", -- 8    **
           "00000000", -- 9
           "00011000", -- a    **
           "00011000", -- b    **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x22 "
           "00000000", -- 0
           "01100110", -- 1  **  **
           "01100110", -- 2  **  **
           "01100110", -- 3  **  **
           "00100100", -- 4   *  *
           "00000000", -- 5
           "00000000", -- 6
           "00000000", -- 7
           "00000000", -- 8
           "00000000", -- 9
           "00000000", -- a
           "00000000", -- b
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x23 #
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "01101100", -- 3  ** **
           "01101100", -- 4  ** **
           "11111110", -- 5 *******
           "01101100", -- 6  ** **
           "01101100", -- 7  ** **
           "01101100", -- 8  ** **
           "11111110", -- 9 *******
           "01101100", -- a  ** **
           "01101100", -- b  ** **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x24 $
           "00011000", -- 0     **
           "00011000", -- 1     **
           "01111100", -- 2   *****
           "11000110", -- 3  **   **
           "11000010", -- 4  **    *
           "11000000", -- 5  **
           "01111100", -- 6   *****
           "00000110", -- 7       **
           "00000110", -- 8       **
           "10000110", -- 9  *    **
           "11000110", -- a  **   **
           "01111100", -- b   *****
           "00011000", -- c     **
           "00011000", -- d     **
           "00000000", -- e
           "00000000", -- f
           -- code x25 %
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "11000010", -- 4 **    *
           "11000110", -- 5 **   **
           "00001100", -- 6     **
           "00011000", -- 7    **
           "00110000", -- 8   **
           "01100000", -- 9  **
           "11000110", -- a **   **
           "10000110", -- b *    **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x26 &
           "00000000", -- 0
           "00000000", -- 1
           "00111000", -- 2   ***
           "01101100", -- 3  ** **
           "01101100", -- 4  ** **
           "00111000", -- 5   ***
           "01110110", -- 6  *** **
           "11011100", -- 7 ** ***
           "11001100", -- 8 **  **
           "11001100", -- 9 **  **
           "11001100", -- a **  **
           "01110110", -- b  *** **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x27 '
           "00000000", -- 0
           "00110000", -- 1   **
           "00110000", -- 2   **
           "00110000", -- 3   **
           "01100000", -- 4  **
           "00000000", -- 5
           "00000000", -- 6
           "00000000", -- 7
           "00000000", -- 8
           "00000000", -- 9
           "00000000", -- a
           "00000000", -- b
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x28 (
           "00000000", -- 0
           "00000000", -- 1
           "00001100", -- 2     **
           "00011000", -- 3    **
           "00110000", -- 4   **
           "00110000", -- 5   **
           "00110000", -- 6   **
           "00110000", -- 7   **
           "00110000", -- 8   **
           "00110000", -- 9   **
           "00011000", -- a    **
           "00001100", -- b     **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x29 )
           "00000000", -- 0
           "00000000", -- 1
           "00110000", -- 2   **
           "00011000", -- 3    **
           "00001100", -- 4     **
           "00001100", -- 5     **
           "00001100", -- 6     **
           "00001100", -- 7     **
           "00001100", -- 8     **
           "00001100", -- 9     **
           "00011000", -- a    **
           "00110000", -- b   **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x2a *
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "01100110", -- 5  **  **
           "00111100", -- 6   ****
           "11111111", -- 7 ********
           "00111100", -- 8   ****
           "01100110", -- 9  **  **
           "00000000", -- a
           "00000000", -- b
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x2b +
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "00011000", -- 5    **
           "00011000", -- 6    **
           "01111110", -- 7  ******
           "00011000", -- 8    **
           "00011000", -- 9    **
           "00000000", -- a
           "00000000", -- b
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x2c ,
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "00000000", -- 5
           "00000000", -- 6
           "00000000", -- 7
           "00000000", -- 8
           "00011000", -- 9    **
           "00011000", -- a    **
           "00011000", -- b    **
           "00110000", -- c   **
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x2d -
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "00000000", -- 5
           "00000000", -- 6
           "01111110", -- 7  ******
           "00000000", -- 8
           "00000000", -- 9
           "00000000", -- a
           "00000000", -- b
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x2e  .
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "00000000", -- 5
           "00000000", -- 6
           "00000000", -- 7
           "00000000", -- 8
           "00000000", -- 9
           "00011000", -- a    **
           "00011000", -- b    **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x2f /
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000010", -- 4       *
           "00000110", -- 5      **
           "00001100", -- 6     **
           "00011000", -- 7    **
           "00110000", -- 8   **
           "01100000", -- 9  **
           "11000000", -- a **
           "10000000", -- b *
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x30
           "00000000", -- 0
           "00000000", -- 1
           "01111100", -- 2  *****
           "11000110", -- 3 **   **
           "11000110", -- 4 **   **
           "11001110", -- 5 **  ***
           "11011110", -- 6 ** ****
           "11110110", -- 7 **** **
           "11100110", -- 8 ***  **
           "11000110", -- 9 **   **
           "11000110", -- a **   **
           "01111100", -- b  *****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x31 
           "00000000", -- 0
           "00000000", -- 1
           "00011000", -- 2
           "00111000", -- 3
           "01111000", -- 4    **
           "00011000", -- 5   ***
           "00011000", -- 6  ****
           "00011000", -- 7    **
           "00011000", -- 8    **
           "00011000", -- 9    **
           "00011000", -- a    **
           "01111110", -- b    **
           "00000000", -- c    **
           "00000000", -- d  ******
           "00000000", -- e
           "00000000", -- f
           -- code x32
           "00000000", -- 0
           "00000000", -- 1
           "01111100", -- 2  *****
           "11000110", -- 3 **   **
           "00000110", -- 4      **
           "00001100", -- 5     **
           "00011000", -- 6    **
           "00110000", -- 7   **
           "01100000", -- 8  **
           "11000000", -- 9 **
           "11000110", -- a **   **
           "11111110", -- b *******
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x33
           "00000000", -- 0
           "00000000", -- 1
           "01111100", -- 2  *****
           "11000110", -- 3 **   **
           "00000110", -- 4      **
           "00000110", -- 5      **
           "00111100", -- 6   ****
           "00000110", -- 7      **
           "00000110", -- 8      **
           "00000110", -- 9      **
           "11000110", -- a **   **
           "01111100", -- b  *****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x34
           "00000000", -- 0
           "00000000", -- 1
           "00001100", -- 2     **
           "00011100", -- 3    ***
           "00111100", -- 4   ****
           "01101100", -- 5  ** **
           "11001100", -- 6 **  **
           "11111110", -- 7 *******
           "00001100", -- 8     **
           "00001100", -- 9     **
           "00001100", -- a     **
           "00011110", -- b    ****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x35
           "00000000", -- 0
           "00000000", -- 1
           "11111110", -- 2 *******
           "11000000", -- 3 **
           "11000000", -- 4 **
           "11000000", -- 5 **
           "11111100", -- 6 ******
           "00000110", -- 7      **
           "00000110", -- 8      **
           "00000110", -- 9      **
           "11000110", -- a **   **
           "01111100", -- b  *****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x36
           "00000000", -- 0
           "00000000", -- 1
           "00111000", -- 2   ***
           "01100000", -- 3  **
           "11000000", -- 4 **
           "11000000", -- 5 **
           "11111100", -- 6 ******
           "11000110", -- 7 **   **
           "11000110", -- 8 **   **
           "11000110", -- 9 **   **
           "11000110", -- a **   **
           "01111100", -- b  *****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x37
           "00000000", -- 0
           "00000000", -- 1
           "11111110", -- 2 *******
           "11000110", -- 3 **   **
           "00000110", -- 4      **
           "00000110", -- 5      **
           "00001100", -- 6     **
           "00011000", -- 7    **
           "00110000", -- 8   **
           "00110000", -- 9   **
           "00110000", -- a   **
           "00110000", -- b   **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x38
           "00000000", -- 0
           "00000000", -- 1
           "01111100", -- 2  *****
           "11000110", -- 3 **   **
           "11000110", -- 4 **   **
           "11000110", -- 5 **   **
           "01111100", -- 6  *****
           "11000110", -- 7 **   **
           "11000110", -- 8 **   **
           "11000110", -- 9 **   **
           "11000110", -- a **   **
           "01111100", -- b  *****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x39
           "00000000", -- 0
           "00000000", -- 1
           "01111100", -- 2  *****
           "11000110", -- 3 **   **
           "11000110", -- 4 **   **
           "11000110", -- 5 **   **
           "01111110", -- 6  ******
           "00000110", -- 7      **
           "00000110", -- 8      **
           "00000110", -- 9      **
           "00001100", -- a     **
           "01111000", -- b  ****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x3a :
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00011000", -- 4    **
           "00011000", -- 5    **
           "00000000", -- 6
           "00000000", -- 7
           "00000000", -- 8
           "00011000", -- 9    **
           "00011000", -- a    **
           "00000000", -- b
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x3b ;
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00011000", -- 4    **
           "00011000", -- 5    **
           "00000000", -- 6
           "00000000", -- 7
           "00000000", -- 8
           "00011000", -- 9    **
           "00011000", -- a    **
           "00110000", -- b   **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x3c <
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000110", -- 3      **
           "00001100", -- 4     **
           "00011000", -- 5    **
           "00110000", -- 6   **
           "01100000", -- 7  **
           "00110000", -- 8   **
           "00011000", -- 9    **
           "00001100", -- a     **
           "00000110", -- b      **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x3d =
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "01111110", -- 5  ******
           "00000000", -- 6
           "00000000", -- 7
           "01111110", -- 8  ******
           "00000000", -- 9
           "00000000", -- a
           "00000000", -- b
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x3e >
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "01100000", -- 3  **
           "00110000", -- 4   **
           "00011000", -- 5    **
           "00001100", -- 6     **
           "00000110", -- 7      **
           "00001100", -- 8     **
           "00011000", -- 9    **
           "00110000", -- a   **
           "01100000", -- b  **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x3f ?
           "00000000", -- 0
           "00000000", -- 1
           "01111100", -- 2  *****
           "11000110", -- 3 **   **
           "11000110", -- 4 **   **
           "00001100", -- 5     **
           "00011000", -- 6    **
           "00011000", -- 7    **
           "00011000", -- 8    **
           "00000000", -- 9
           "00011000", -- a    **
           "00011000", -- b    **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x40 @
           "00000000", -- 0
           "00000000", -- 1
           "01111100", -- 2  *****
           "11000110", -- 3 **   **
           "11000110", -- 4 **   **
           "11000110", -- 5 **   **
           "11011110", -- 6 ** ****
           "11011110", -- 7 ** ****
           "11011110", -- 8 ** ****
           "11011100", -- 9 ** ***
           "11000000", -- a **
           "01111100", -- b  *****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x41
           "00000000", -- 0
           "00000000", -- 1
           "00010000", -- 2    *
           "00111000", -- 3   ***
           "01101100", -- 4  ** **
           "11000110", -- 5 **   **
           "11000110", -- 6 **   **
           "11111110", -- 7 *******
           "11000110", -- 8 **   **
           "11000110", -- 9 **   **
           "11000110", -- a **   **
           "11000110", -- b **   **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x42
           "00000000", -- 0
           "00000000", -- 1
           "11111100", -- 2 ******
           "01100110", -- 3  **  **
           "01100110", -- 4  **  **
           "01100110", -- 5  **  **
           "01111100", -- 6  *****
           "01100110", -- 7  **  **
           "01100110", -- 8  **  **
           "01100110", -- 9  **  **
           "01100110", -- a  **  **
           "11111100", -- b ******
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x43
           "00000000", -- 0
           "00000000", -- 1
           "00111100", -- 2   ****
           "01100110", -- 3  **  **
           "11000010", -- 4 **    *
           "11000000", -- 5 **
           "11000000", -- 6 **
           "11000000", -- 7 **
           "11000000", -- 8 **
           "11000010", -- 9 **    *
           "01100110", -- a  **  **
           "00111100", -- b   ****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x44
           "00000000", -- 0
           "00000000", -- 1
           "11111000", -- 2 *****
           "01101100", -- 3  ** **
           "01100110", -- 4  **  **
           "01100110", -- 5  **  **
           "01100110", -- 6  **  **
           "01100110", -- 7  **  **
           "01100110", -- 8  **  **
           "01100110", -- 9  **  **
           "01101100", -- a  ** **
           "11111000", -- b *****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x45
           "00000000", -- 0
           "00000000", -- 1
           "11111110", -- 2 *******
           "01100110", -- 3  **  **
           "01100010", -- 4  **   *
           "01101000", -- 5  ** *
           "01111000", -- 6  ****
           "01101000", -- 7  ** *
           "01100000", -- 8  **
           "01100010", -- 9  **   *
           "01100110", -- a  **  **
           "11111110", -- b *******
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x46
           "00000000", -- 0
           "00000000", -- 1
           "11111110", -- 2 *******
           "01100110", -- 3  **  **
           "01100010", -- 4  **   *
           "01101000", -- 5  ** *
           "01111000", -- 6  ****
           "01101000", -- 7  ** *
           "01100000", -- 8  **
           "01100000", -- 9  **
           "01100000", -- a  **
           "11110000", -- b ****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x47
           "00000000", -- 0
           "00000000", -- 1
           "00111100", -- 2   ****
           "01100110", -- 3  **  **
           "11000010", -- 4 **    *
           "11000000", -- 5 **
           "11000000", -- 6 **
           "11011110", -- 7 ** ****
           "11000110", -- 8 **   **
           "11000110", -- 9 **   **
           "01100110", -- a  **  **
           "00111010", -- b   *** *
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x48
           "00000000", -- 0
           "00000000", -- 1
           "11000110", -- 2 **   **
           "11000110", -- 3 **   **
           "11000110", -- 4 **   **
           "11000110", -- 5 **   **
           "11111110", -- 6 *******
           "11000110", -- 7 **   **
           "11000110", -- 8 **   **
           "11000110", -- 9 **   **
           "11000110", -- a **   **
           "11000110", -- b **   **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x49
           "00000000", -- 0
           "00000000", -- 1
           "00111100", -- 2   ****
           "00011000", -- 3    **
           "00011000", -- 4    **
           "00011000", -- 5    **
           "00011000", -- 6    **
           "00011000", -- 7    **
           "00011000", -- 8    **
           "00011000", -- 9    **
           "00011000", -- a    **
           "00111100", -- b   ****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x4a
           "00000000", -- 0
           "00000000", -- 1
           "00011110", -- 2    ****
           "00001100", -- 3     **
           "00001100", -- 4     **
           "00001100", -- 5     **
           "00001100", -- 6     **
           "00001100", -- 7     **
           "11001100", -- 8 **  **
           "11001100", -- 9 **  **
           "11001100", -- a **  **
           "01111000", -- b  ****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x4b
           "00000000", -- 0
           "00000000", -- 1
           "11100110", -- 2 ***  **
           "01100110", -- 3  **  **
           "01100110", -- 4  **  **
           "01101100", -- 5  ** **
           "01111000", -- 6  ****
           "01111000", -- 7  ****
           "01101100", -- 8  ** **
           "01100110", -- 9  **  **
           "01100110", -- a  **  **
           "11100110", -- b ***  **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x4c
           "00000000", -- 0
           "00000000", -- 1
           "11110000", -- 2 ****
           "01100000", -- 3  **
           "01100000", -- 4  **
           "01100000", -- 5  **
           "01100000", -- 6  **
           "01100000", -- 7  **
           "01100000", -- 8  **
           "01100010", -- 9  **   *
           "01100110", -- a  **  **
           "11111110", -- b *******
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x4d
           "00000000", -- 0
           "00000000", -- 1
           "11000011", -- 2 **    **
           "11100111", -- 3 ***  ***
           "11111111", -- 4 ********
           "11111111", -- 5 ********
           "11011011", -- 6 ** ** **
           "11000011", -- 7 **    **
           "11000011", -- 8 **    **
           "11000011", -- 9 **    **
           "11000011", -- a **    **
           "11000011", -- b **    **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x4e
           "00000000", -- 0
           "00000000", -- 1
           "11000110", -- 2 **   **
           "11100110", -- 3 ***  **
           "11110110", -- 4 **** **
           "11111110", -- 5 *******
           "11011110", -- 6 ** ****
           "11001110", -- 7 **  ***
           "11000110", -- 8 **   **
           "11000110", -- 9 **   **
           "11000110", -- a **   **
           "11000110", -- b **   **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x4f
           "00000000", -- 0
           "00000000", -- 1
           "01111100", -- 2  *****
           "11000110", -- 3 **   **
           "11000110", -- 4 **   **
           "11000110", -- 5 **   **
           "11000110", -- 6 **   **
           "11000110", -- 7 **   **
           "11000110", -- 8 **   **
           "11000110", -- 9 **   **
           "11000110", -- a **   **
           "01111100", -- b  *****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x50
           "00000000", -- 0
           "00000000", -- 1
           "11111100", -- 2 ******
           "01100110", -- 3  **  **
           "01100110", -- 4  **  **
           "01100110", -- 5  **  **
           "01111100", -- 6  *****
           "01100000", -- 7  **
           "01100000", -- 8  **
           "01100000", -- 9  **
           "01100000", -- a  **
           "11110000", -- b ****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x510
           "00000000", -- 0
           "00000000", -- 1
           "01111100", -- 2  *****
           "11000110", -- 3 **   **
           "11000110", -- 4 **   **
           "11000110", -- 5 **   **
           "11000110", -- 6 **   **
           "11000110", -- 7 **   **
           "11000110", -- 8 **   **
           "11010110", -- 9 ** * **
           "11011110", -- a ** ****
           "01111100", -- b  *****
           "00001100", -- c     **
           "00001110", -- d     ***
           "00000000", -- e
           "00000000", -- f
           -- code x52
           "00000000", -- 0
           "00000000", -- 1
           "11111100", -- 2 ******
           "01100110", -- 3  **  **
           "01100110", -- 4  **  **
           "01100110", -- 5  **  **
           "01111100", -- 6  *****
           "01101100", -- 7  ** **
           "01100110", -- 8  **  **
           "01100110", -- 9  **  **
           "01100110", -- a  **  **
           "11100110", -- b ***  **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x53
           "00000000", -- 0
           "00000000", -- 1
           "01111100", -- 2  *****
           "11000110", -- 3 **   **
           "11000110", -- 4 **   **
           "01100000", -- 5  **
           "00111000", -- 6   ***
           "00001100", -- 7     **
           "00000110", -- 8      **
           "11000110", -- 9 **   **
           "11000110", -- a **   **
           "01111100", -- b  *****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x54
           "00000000", -- 0
           "00000000", -- 1
           "11111111", -- 2 ********
           "11011011", -- 3 ** ** **
           "10011001", -- 4 *  **  *
           "00011000", -- 5    **
           "00011000", -- 6    **
           "00011000", -- 7    **
           "00011000", -- 8    **
           "00011000", -- 9    **
           "00011000", -- a    **
           "00111100", -- b   ****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x55
           "00000000", -- 0
           "00000000", -- 1
           "11000110", -- 2 **   **
           "11000110", -- 3 **   **
           "11000110", -- 4 **   **
           "11000110", -- 5 **   **
           "11000110", -- 6 **   **
           "11000110", -- 7 **   **
           "11000110", -- 8 **   **
           "11000110", -- 9 **   **
           "11000110", -- a **   **
           "01111100", -- b  *****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x56
           "00000000", -- 0
           "00000000", -- 1
           "11000011", -- 2 **    **
           "11000011", -- 3 **    **
           "11000011", -- 4 **    **
           "11000011", -- 5 **    **
           "11000011", -- 6 **    **
           "11000011", -- 7 **    **
           "11000011", -- 8 **    **
           "01100110", -- 9  **  **
           "00111100", -- a   ****
           "00011000", -- b    **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x57
           "00000000", -- 0
           "00000000", -- 1
           "11000011", -- 2 **    **
           "11000011", -- 3 **    **
           "11000011", -- 4 **    **
           "11000011", -- 5 **    **
           "11000011", -- 6 **    **
           "11011011", -- 7 ** ** **
           "11011011", -- 8 ** ** **
           "11111111", -- 9 ********
           "01100110", -- a  **  **
           "01100110", -- b  **  **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
        
           -- code x58
           "00000000", -- 0
           "00000000", -- 1
           "11000011", -- 2 **    **
           "11000011", -- 3 **    **
           "01100110", -- 4  **  **
           "00111100", -- 5   ****
           "00011000", -- 6    **
           "00011000", -- 7    **
           "00111100", -- 8   ****
           "01100110", -- 9  **  **
           "11000011", -- a **    **
           "11000011", -- b **    **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x59
           "00000000", -- 0
           "00000000", -- 1
           "11000011", -- 2 **    **
           "11000011", -- 3 **    **
           "11000011", -- 4 **    **
           "01100110", -- 5  **  **
           "00111100", -- 6   ****
           "00011000", -- 7    **
           "00011000", -- 8    **
           "00011000", -- 9    **
           "00011000", -- a    **
           "00111100", -- b   ****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x5a
           "00000000", -- 0
           "00000000", -- 1
           "11111111", -- 2 ********
           "11000011", -- 3 **    **
           "10000110", -- 4 *    **
           "00001100", -- 5     **
           "00011000", -- 6    **
           "00110000", -- 7   **
           "01100000", -- 8  **
           "11000001", -- 9 **     *
           "11000011", -- a **    **
           "11111111", -- b ********
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x5b
           "00000000", -- 0
           "00000000", -- 1
           "00111100", -- 2   ****
           "00110000", -- 3   **
           "00110000", -- 4   **
           "00110000", -- 5   **
           "00110000", -- 6   **
           "00110000", -- 7   **
           "00110000", -- 8   **
           "00110000", -- 9   **
           "00110000", -- a   **
           "00111100", -- b   ****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x5c
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "10000000", -- 3 *
           "11000000", -- 4 **
           "11100000", -- 5 ***
           "01110000", -- 6  ***
           "00111000", -- 7   ***
           "00011100", -- 8    ***
           "00001110", -- 9     ***
           "00000110", -- a      **
           "00000010", -- b       *
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x5d
           "00000000", -- 0
           "00000000", -- 1
           "00111100", -- 2   ****
           "00001100", -- 3     **
           "00001100", -- 4     **
           "00001100", -- 5     **
           "00001100", -- 6     **
           "00001100", -- 7     **
           "00001100", -- 8     **
           "00001100", -- 9     **
           "00001100", -- a     **
           "00111100", -- b   ****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x5e
           "00010000", -- 0    *
           "00111000", -- 1   ***
           "01101100", -- 2  ** **
           "11000110", -- 3 **   **
           "00000000", -- 4
           "00000000", -- 5
           "00000000", -- 6
           "00000000", -- 7
           "00000000", -- 8
           "00000000", -- 9
           "00000000", -- a
           "00000000", -- b
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x5f
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "00000000", -- 5
           "00000000", -- 6
           "00000000", -- 7
           "00000000", -- 8
           "00000000", -- 9
           "00000000", -- a
           "00000000", -- b
           "00000000", -- c
           "11111111", -- d ********
           "00000000", -- e
           "00000000", -- f
           -- code x60
           "00110000", -- 0   **
           "00110000", -- 1   **
           "00011000", -- 2    **
           "00000000", -- 3
           "00000000", -- 4
           "00000000", -- 5
           "00000000", -- 6
           "00000000", -- 7
           "00000000", -- 8
           "00000000", -- 9
           "00000000", -- a
           "00000000", -- b
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x61
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "01111000", -- 5  ****
           "00001100", -- 6     **
           "01111100", -- 7  *****
           "11001100", -- 8 **  **
           "11001100", -- 9 **  **
           "11001100", -- a **  **
           "01110110", -- b  *** **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x62
           "00000000", -- 0
           "00000000", -- 1
           "11100000", -- 2  ***
           "01100000", -- 3   **
           "01100000", -- 4   **
           "01111000", -- 5   ****
           "01101100", -- 6   ** **
           "01100110", -- 7   **  **
           "01100110", -- 8   **  **
           "01100110", -- 9   **  **
           "01100110", -- a   **  **
           "01111100", -- b   *****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x63
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "01111100", -- 5  *****
           "11000110", -- 6 **   **
           "11000000", -- 7 **
           "11000000", -- 8 **
           "11000000", -- 9 **
           "11000110", -- a **   **
           "01111100", -- b  *****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x64
           "00000000", -- 0
           "00000000", -- 1
           "00011100", -- 2    ***
           "00001100", -- 3     **
           "00001100", -- 4     **
           "00111100", -- 5   ****
           "01101100", -- 6  ** **
           "11001100", -- 7 **  **
           "11001100", -- 8 **  **
           "11001100", -- 9 **  **
           "11001100", -- a **  **
           "01110110", -- b  *** **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x65
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "01111100", -- 5  *****
           "11000110", -- 6 **   **
           "11111110", -- 7 *******
           "11000000", -- 8 **
           "11000000", -- 9 **
           "11000110", -- a **   **
           "01111100", -- b  *****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x66
           "00000000", -- 0
           "00000000", -- 1
           "00111000", -- 2   ***
           "01101100", -- 3  ** **
           "01100100", -- 4  **  *
           "01100000", -- 5  **
           "11110000", -- 6 ****
           "01100000", -- 7  **
           "01100000", -- 8  **
           "01100000", -- 9  **
           "01100000", -- a  **
           "11110000", -- b ****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x67
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "01110110", -- 5  *** **
           "11001100", -- 6 **  **
           "11001100", -- 7 **  **
           "11001100", -- 8 **  **
           "11001100", -- 9 **  **
           "11001100", -- a **  **
           "01111100", -- b  *****
           "00001100", -- c     **
           "11001100", -- d **  **
           "01111000", -- e  ****
           "00000000", -- f
           -- code x68
           "00000000", -- 0
           "00000000", -- 1
           "11100000", -- 2 ***
           "01100000", -- 3  **
           "01100000", -- 4  **
           "01101100", -- 5  ** **
           "01110110", -- 6  *** **
           "01100110", -- 7  **  **
           "01100110", -- 8  **  **
           "01100110", -- 9  **  **
           "01100110", -- a  **  **
           "11100110", -- b ***  **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x69
           "00000000", -- 0
           "00000000", -- 1
           "00011000", -- 2    **
           "00011000", -- 3    **
           "00000000", -- 4
           "00111000", -- 5   ***
           "00011000", -- 6    **
           "00011000", -- 7    **
           "00011000", -- 8    **
           "00011000", -- 9    **
           "00011000", -- a    **
           "00111100", -- b   ****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x6a
           "00000000", -- 0
           "00000000", -- 1
           "00000110", -- 2      **
           "00000110", -- 3      **
           "00000000", -- 4
           "00001110", -- 5     ***
           "00000110", -- 6      **
           "00000110", -- 7      **
           "00000110", -- 8      **
           "00000110", -- 9      **
           "00000110", -- a      **
           "00000110", -- b      **
           "01100110", -- c  **  **
           "01100110", -- d  **  **
           "00111100", -- e   ****
           "00000000", -- f
           -- code x6b
           "00000000", -- 0
           "00000000", -- 1
           "11100000", -- 2 ***
           "01100000", -- 3  **
           "01100000", -- 4  **
           "01100110", -- 5  **  **
           "01101100", -- 6  ** **
           "01111000", -- 7  ****
           "01111000", -- 8  ****
           "01101100", -- 9  ** **
           "01100110", -- a  **  **
           "11100110", -- b ***  **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x6c
           "00000000", -- 0
           "00000000", -- 1
           "00111000", -- 2   ***
           "00011000", -- 3    **
           "00011000", -- 4    **
           "00011000", -- 5    **
           "00011000", -- 6    **
           "00011000", -- 7    **
           "00011000", -- 8    **
           "00011000", -- 9    **
           "00011000", -- a    **
           "00111100", -- b   ****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x6d
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "11100110", -- 5 ***  **
           "11111111", -- 6 ********
           "11011011", -- 7 ** ** **
           "11011011", -- 8 ** ** **
           "11011011", -- 9 ** ** **
           "11011011", -- a ** ** **
           "11011011", -- b ** ** **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x6e
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "11011100", -- 5 ** ***
           "01100110", -- 6  **  **
           "01100110", -- 7  **  **
           "01100110", -- 8  **  **
           "01100110", -- 9  **  **
           "01100110", -- a  **  **
           "01100110", -- b  **  **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x6f
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "01111100", -- 5  *****
           "11000110", -- 6 **   **
           "11000110", -- 7 **   **
           "11000110", -- 8 **   **
           "11000110", -- 9 **   **
           "11000110", -- a **   **
           "01111100", -- b  *****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x70
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "11011100", -- 5 ** ***
           "01100110", -- 6  **  **
           "01100110", -- 7  **  **
           "01100110", -- 8  **  **
           "01100110", -- 9  **  **
           "01100110", -- a  **  **
           "01111100", -- b  *****
           "01100000", -- c  **
           "01100000", -- d  **
           "11110000", -- e ****
           "00000000", -- f
           -- code x71
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "01110110", -- 5  *** **
           "11001100", -- 6 **  **
           "11001100", -- 7 **  **
           "11001100", -- 8 **  **
           "11001100", -- 9 **  **
           "11001100", -- a **  **
           "01111100", -- b  *****
           "00001100", -- c     **
           "00001100", -- d     **
           "00011110", -- e    ****
           "00000000", -- f
           -- code x72
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "11011100", -- 5 ** ***
           "01110110", -- 6  *** **
           "01100110", -- 7  **  **
           "01100000", -- 8  **
           "01100000", -- 9  **
           "01100000", -- a  **
           "11110000", -- b ****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x73
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "01111100", -- 5  *****
           "11000110", -- 6 **   **
           "01100000", -- 7  **
           "00111000", -- 8   ***
           "00001100", -- 9     **
           "11000110", -- a **   **
           "01111100", -- b  *****
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x74
           "00000000", -- 0
           "00000000", -- 1
           "00010000", -- 2    *
           "00110000", -- 3   **
           "00110000", -- 4   **
           "11111100", -- 5 ******
           "00110000", -- 6   **
           "00110000", -- 7   **
           "00110000", -- 8   **
           "00110000", -- 9   **
           "00110110", -- a   ** **
           "00011100", -- b    ***
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x75
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "11001100", -- 5 **  **
           "11001100", -- 6 **  **
           "11001100", -- 7 **  **
           "11001100", -- 8 **  **
           "11001100", -- 9 **  **
           "11001100", -- a **  **
           "01110110", -- b  *** **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x76
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "11000011", -- 5 **    **
           "11000011", -- 6 **    **
           "11000011", -- 7 **    **
           "11000011", -- 8 **    **
           "01100110", -- 9  **  **
           "00111100", -- a   ****
           "00011000", -- b    **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x77
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "11000011", -- 5 **    **
           "11000011", -- 6 **    **
           "11000011", -- 7 **    **
           "11011011", -- 8 ** ** **
           "11011011", -- 9 ** ** **
           "11111111", -- a ********
           "01100110", -- b  **  **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x78
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "11000011", -- 5 **    **
           "01100110", -- 6  **  **
           "00111100", -- 7   ****
           "00011000", -- 8    **
           "00111100", -- 9   ****
           "01100110", -- a  **  **
           "11000011", -- b **    **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x79
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "11000110", -- 5 **   **
           "11000110", -- 6 **   **
           "11000110", -- 7 **   **
           "11000110", -- 8 **   **
           "11000110", -- 9 **   **
           "11000110", -- a **   **
           "01111110", -- b  ******
           "00000110", -- c      **
           "00001100", -- d     **
           "11111000", -- e *****
           "00000000", -- f
           -- code x7a
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00000000", -- 4
           "11111110", -- 5 *******
           "11001100", -- 6 **  **
           "00011000", -- 7    **
           "00110000", -- 8   **
           "01100000", -- 9  **
           "11000110", -- a **   **
           "11111110", -- b *******
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x7b {
           "00000000", -- 0
           "00000000", -- 1
           "00001110", -- 2     ***
           "00011000", -- 3    **
           "00011000", -- 4    **
           "00011000", -- 5    **
           "01110000", -- 6  ***
           "00011000", -- 7    **
           "00011000", -- 8    **
           "00011000", -- 9    **
           "00011000", -- a    **
           "00001110", -- b     ***
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x7c |
           "00000000", -- 0
           "00000000", -- 1
           "00011000", -- 2    **
           "00011000", -- 3    **
           "00011000", -- 4    **
           "00011000", -- 5    **
           "00000000", -- 6
           "00011000", -- 7    **
           "00011000", -- 8    **
           "00011000", -- 9    **
           "00011000", -- a    **
           "00011000", -- b    **
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x7d }
           "00000000", -- 0
           "00000000", -- 1
           "01110000", -- 2  ***
           "00011000", -- 3    **
           "00011000", -- 4    **
           "00011000", -- 5    **
           "00001110", -- 6     ***
           "00011000", -- 7    **
           "00011000", -- 8    **
           "00011000", -- 9    **
           "00011000", -- a    **
           "01110000", -- b  ***
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x7e ~
           "00000000", -- 0
           "00000000", -- 1
           "01110110", -- 2  *** **
           "11011100", -- 3 ** ***
           "00000000", -- 4
           "00000000", -- 5
           "00000000", -- 6
           "00000000", -- 7
           "00000000", -- 8
           "00000000", -- 9
           "00000000", -- a
           "00000000", -- b
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000", -- f
           -- code x7f
           "00000000", -- 0
           "00000000", -- 1
           "00000000", -- 2
           "00000000", -- 3
           "00010000", -- 4    *
           "00111000", -- 5   ***
           "01101100", -- 6  ** **
           "11000110", -- 7 **   **
           "11000110", -- 8 **   **
           "11000110", -- 9 **   **
           "11111110", -- a *******
           "00000000", -- b
           "00000000", -- c
           "00000000", -- d
           "00000000", -- e
           "00000000"  -- f
           );
        
        begin
            --return X <= 8 and Y <= 16 and ROM((char * 16) + Y)(9 - X) = '1';
            return ROM((CHARACTER'POS(char) * 16) + Y)(9 - X) = '1';
    end draw_char;
        
    function draw_string(scanX : natural; scanY : natural; posXUser : natural; posYUser : natural; s : string; center : boolean; size : natural) return boolean is -- funzione per disegnare le frasi (in modo che i caratteri siano alla stessa altezza e alla giusta distanza)
        constant charW : natural := 8 * size;
        constant charWsp : natural := charW + 2;
        constant charH : natural := 16 * size;
        constant width : natural := charWsp * s'LENGTH;
        constant height : natural := charH;
        variable x : natural := posXUser;
        variable y : natural := posYUser;
        variable char : natural;
        variable subX : natural;
        begin
            if (center) then
                x := x - (width / 2);
                y := y - (height / 2);
            end if;
        
            if (scanX < x or scanY < y) then
                return false;
            end if;
                
            if (scanX - x > width or scanY - y > height) then
                return false;
            end if;
                
            x := scanX - x;
            y := scanY - y;
                
            subX := x mod charWsp;
            char := (x / charWsp) + 1;
                
            return draw_char(subX / size, y / size, s(char));
    end draw_string;

begin
	VGA: entity work.vga
        port map (
            CLK_I => clk,
            VGA_RED_O => vgaRed,
            VGA_BLUE_O => vgaBlue,
            VGA_GREEN_O => vgaGreen,
            VGA_HS_O => Hsync,
            VGA_VS_O => Vsync,
            X => X,
            Y => Y,
            R => Red,
            G => Green,
            B => Blue
        );
    
	--DB_U: entity work.debounce
		--	port map (
			--	clk => clk,
			--	button => btnU,
			--	result => btnU_DB
		--	);

	MIC: entity work.pdm_top port map(
	    clk => clk,
	    m_clk =>m_clk,     
        m_lr_sel =>m_lr_sel,
        m_data=>m_data,
        B=>btnU_DB,
        R=>rr,
        G=>gg
	);
    	
	sevenSegDisplay : entity work.SevSeg_4digit
	    port map (
	        clk => clk,
            in0 => in0,
	        in1 => in1,
	        in2 => in2,
	        in3 => in3,
            a => a,
	        b => b,
	        c => c,
	        d => d,
            e => e,
	        f => f,
	        g => g,
	        dp => dp,
            an => an   
	    );  
    	
    --Mechanics for the motion of bars
	process( clk )  
	begin
	   if (rising_edge(clk)) then
            frame_count <= frame_count + 1;
            if( reset = '1') then -- beginning of the game 
                indexBarNext <= 0;
                BarXPositions <= (  centerX,
                                    centerX + BarLengths(0)-sizeOfGuy, 
                                    centerX + BarLengths(0)-sizeOfGuy + BarLengths(1)-sizeOfGuy,
                                    centerX + BarLengths(0)-sizeOfGuy + BarLengths(1)-sizeOfGuy + BarLengths(2)-sizeOfGuy,
                                    centerX + BarLengths(0)-sizeOfGuy + BarLengths(1)-sizeOfGuy + BarLengths(2)-sizeOfGuy + BarLengths(3)-sizeOfGuy );
                BarYPositions <= (700, 700, 700, 700,700);  
                BarLengths <= ( 256,256,256,256,256);
            elsif (frame_count >= 500000) then
                frame_count <= 0; 
                if( gameOver = '0' ) then
                   for i in 0 to 4 loop
                        BarXPositions(i) <= BarXPositions(i) - speedOfBars; --moving the bars
                        if ( BarXPositions(i) + BarLengths(i)<= 0) then --when the bar is out of the screen. Generate the next bar
                            --Bars
                            BarXPositions(i) <= 1280;
                            BarLengths(i) <= BarLengthsNext( indexBarNext);
                            BarYPositions(i) <= BarYPositionsNext( indexBarNext);
                            if( indexBarNext >= 99) then
                                indexBarNext <= 0;
                            else
                                indexBarNext <= indexBarNext + 1;
                            end if;
                        end if;
                    end loop;
                end if;  
            end if;
        end if;
	end process;
	
	-- Detecting the edge of the bar
	process( clk, BarXPositions, posXUser, gameOVer, BarLengths, BarYPositions) 
    begin
        if( rising_edge(clk) ) then
            cur_cnt <= cur_cnt + 1;
            if( reset = '1') then
                cur_cnt <= 0;
            elsif( cur_cnt >= 900) then 
                cur_cnt <= 0;
                if( gameOver = '0' ) then
                    for i in 0 to 4 loop 
                       if( posXUser + sizeOfGuy >= BarXPositions(i)  and posXUser <= BarXPositions(i) + BarLengths(i) - sizeOfGuy ) then  
                           currentEdge <= BarYPositions(i);
                           exit;
                       else
                           currentEdge <= 1024; 
                       end if;
                   end loop;
                end if; 
            end if;
        end if;
    end process;
	
    --Setting the motion of the guy up or down
    process( clk, reset, btnU_DB)
    begin
        if( rising_edge(clk) ) then
            btn_cnt <= btn_cnt + 1; 
            if( reset = '1' ) then 
                moveUp <= '0'; 
                move <= '0';          
            elsif( btn_cnt >= 500000) then
                btn_cnt <= 0;
				--Direction
                if( btnU_DB = '1') then
                    moveUp <= '1'; 
                    move <= '0';
				end if;
            end if;
        end if;
    end process;
	
	 --Actual motion of the user after the direction is set (changes posYUser), this process actually moves the user. Game Over is also checked here 
    process( clk, reset, moveUp) 
    begin
        if( rising_edge(clk) ) then
            clk_cnt <= clk_cnt + 1;
            if( reset = '1' ) then
                posXUser <= centerX;
                posYUser <= centerY;
                gameOver <= '0';
            elsif( clk_cnt >= 500000) then
                clk_cnt <= 0;
                if( gameOver = '0' ) then
                    if ( btnU_DB= '1') then 
                         posYUser <= posYUser - speedOfGuy-15; 
                    elsif(  btnU_DB= '0' or (posXUser >= currentEdge-speedOfGuy) or posYUser <= speedOfGuy or posYUser >= 1024 - sizeOfGuy ) then 
                        posYUser <= posYUser + speedOfGuy + gravity; 
                        if(( posYUser + sizeOfGuy >= currentEdge and posYUser <= currentEdge + heightOfBar) or posYUser <= speedOfGuy or posYUser >= 1024 - sizeOfGuy ) then 
                            posYUser <= platform_y;
                        end if; 
                        if(  posYUser >=723) then 
                            gameOver<='1'; 
                        end if;             
                    end if;
                end if;
            end if;       
        end if;
    end process;

	--Timer for score
	process( clk) 
	begin
        if( rising_edge(clk) ) then
            score_cnt <= score_cnt + 1;
            if( reset = '1') then
                score_cnt <= 0;
                score <= 0;
            elsif( score_cnt >= 10000000) then
                score_cnt <= 0;
                if( gameOver = '0' ) then
                    score <= score + 1;
                     if ( btnU_DB= '1') then
                      score <= score + 0;
                end if;
                end if;
            end if;
        end if;
	end process;

    --Adjusting the speed according to score, the higher the score, the faster the game
	process( clk, score)
	begin
	   if( rising_edge(clk) ) then
	      if( reset = '1' ) then
              speedOfGuy <= 1;
              speedOfBars <= 1;
          elsif ( score <= 100) then 
              speedOfGuy <= 1;
              speedOfBars <= 1;
          elsif( score >= 1000) then
              speedOfBars <= 4;
              speedOfGuy <= 4;
          elsif( score >= 500) then
              speedOfGuy <= 3;
              speedOfBars <= 3;
          elsif( score >= 200) then
              speedOfGuy <= 2;
              speedOfBars <= 2;
          end if;
	   end if;
	   
	   
	   
	end process;
	
	--Showing the score on 7 segment display (converting the score to 4 digits)
	process( score)
	    variable integer0: natural range 0 to 9;
        variable integer1: natural range 0 to 9;
        variable integer1mod: natural range 0 to 99;
        variable integer2: natural range 0 to 9;
        variable integer2mod: natural range 0 to 999;
        variable integer3: natural range 0 to 9;
	begin
	   integer0 := score mod 10;
	   in0 <=  conv_std_logic_vector(integer0,4);
	   
	   integer1mod := score mod 100;
	   integer1 := integer1Mod / 10;
	   in1 <= conv_std_logic_vector(integer1,4);
	   
	   integer2mod := score mod 1000;
	   integer2 := integer2mod / 100;
	   in2 <= conv_std_logic_vector(integer2,4);
	   
	   integer3 := score / 1000;
	   in3 <= conv_std_logic_vector(integer3,4);
	end process;

	
	--Drawing the video
	process( X, Y, gameOver, posXUser, posYUser,  BarYPositions, BarXPositions, BarLengths)
	begin
	    if( gameOver = '1' ) then
            if((X-centerX)*(X-centerX)+(Y-centerY)*(Y-centerY))<=(radius*radius) then
                Red <= 10;
                Green <= 0;
                Blue <= 0;
            elsif (draw_string(X, Y, centerX, centerY-300, "GAME OVER!", true, 5)) then
	            Red <= 0;
                Green <= 0;
                Blue <= 0;
            else
                Red <= 15;
	            Green <= 15;
	            Blue <= 15;
	        end if;
	    else
	       --Guy
            if( Y > posYUser and Y < posYUser + sizeOfGuy and X > posXUser and X < posXUser + sizeOfGuy ) then
                if( gameOver = '1') then
                    Red <= 15;
                    Green <= 15;
                    Blue <= 0;
                else
                    Red <= 5;
                    Green <= 9;
                    Blue <= 10;
                end if;
           
            --Bars
            elsif( Y > BarYPositions(0) and Y < BarYPositions(0) + heightOfBar
                                   and  X > BarXPositions(0)
                                   and X < BarXPositions(0) + BarLengths(0)-sizeOfGuy) then
                Red <= 14;
                Green <= 7;
                Blue <= 8;                    
            elsif( Y > BarYPositions(1) and Y < BarYPositions(1) + heightOfBar
                                   and  X > BarXPositions(1)
                                   and X < BarXPositions(1) + BarLengths(1)-sizeOfGuy ) then
                Red <= 14;
                Green <= 7;
                Blue <= 8;         
            elsif( Y > BarYPositions(2) and Y < BarYPositions(2) + heightOfBar
                                   and  X > BarXPositions(2) 
                                   and X < BarXPositions(2) + BarLengths(2)-sizeOfGuy ) then
                Red <= 14;
                Green <= 7;
                Blue <= 8;                         
            elsif( Y > BarYPositions(3) and Y < BarYPositions(3) + heightOfBar
                                   and  X > BarXPositions(3)
                                   and X < BarXPositions(3) + BarLengths(3)-sizeOfGuy ) then
                Red <= 14;
                Green <= 7;
                Blue <= 8;
            elsif( Y > BarYPositions(4) and Y < BarYPositions(4) + heightOfBar
                                   and  X > BarXPositions(4)
                                   and X < BarXPositions(4) + BarLengths(4)-sizeOfGuy ) then
                Red <= 14;
                Green <= 7;
                Blue <= 8;
            --Background
            else
                if((X-centerX)*(X-centerX)+(Y-centerY)*(Y-centerY))<=(radius*radius) then
                    Red <= 10;
                    Green <= 0;
                    Blue <= 0;
                elsif (draw_string(X, Y, centerX, centerY-300, "NIPPON QUEST", true, 5)) then
                    Red <= 0;
                    Green <= 0;
                    Blue <= 0;
                else
	                Red <= 15;
	                Green <= 15;
	                Blue <= 15;
	            end if;        
            end if;
	    end if;
	end process;  
      

end Behavioral;
